<h1>System Patterns</h1>
<h2>Architecture</h2>
<ul>
<li>Static website generated by 11ty.</li>
<li>Content is sourced from Markdown files organized within discipline-specific directories.</li>
<li>Hosted directly via GitHub Pages.</li>
</ul>
<h2>Content Organization</h2>
<ul>
<li><strong>Top-level:</strong> Disciplines (e.g., <code>development/</code>, <code>project-management/</code>, <code>sales-marketing/</code>, <code>content-strategy/</code>, <code>design/</code>)</li>
<li><strong>Second-level:</strong> Content Types (<code>prompts/</code>, <code>cursor-rules/</code>, <code>project-configs/</code>, <code>workflow-states/</code>)</li>
<li>Specific content items are individual Markdown files within these directories, typically using <code>kebab-case.md</code> naming.</li>
<li>An <code>index.njk</code> file often exists within discipline directories (e.g., <code>development/index.njk</code>) and content-type directories (e.g., <code>development/prompts/index.njk</code>) likely serving as landing/listing pages.</li>
<li>11ty collections are automatically generated for each content type, aggregating across disciplines.</li>
</ul>
<h2>Templating</h2>
<ul>
<li>Nunjucks (.njk) is used as the primary templating engine (for md, html, data files).</li>
<li>Key layout files:
<ul>
<li><code>_layouts/base.njk</code></li>
<li><code>_layouts/discipline.njk</code></li>
<li><code>_layouts/content-type.njk</code></li>
</ul>
</li>
<li>Includes/partials are stored in <code>_includes/</code>.</li>
<li>Global data is stored in <code>_data/</code>.</li>
<li>Custom Nunjucks filters defined in <code>.eleventy.js</code>: <code>date</code>, <code>filterByDiscipline</code>, <code>fullUrl</code>, <code>hasContent</code>.</li>
<li>Directory structure configured in <code>.eleventy.js</code>: input (<code>.</code>), output (<code>_site</code>), includes (<code>_includes</code>), layouts (<code>_layouts</code>), data (<code>_data</code>).</li>
</ul>
<h2>Search</h2>
<ul>
<li>A search index (<code>search-index.json</code>) is generated during build containing title, description, content, url, discipline, contentType, tags, and date for all <code>.md</code> files.</li>
<li>Search functionality is implemented client-side via JavaScript in <code>_includes/search.njk</code>.</li>
<li><strong>Implementation:</strong>
<ul>
<li>Fetches <code>search-index.json</code> on page load.</li>
<li>Filters the index in the browser based on user input (case-insensitive matching on title, description, content, tags).</li>
<li>Results displayed dynamically, updating as user types (min 2 chars).</li>
</ul>
</li>
<li><strong>Features:</strong>
<ul>
<li>Results link to the content page.</li>
<li>&quot;View Prompt&quot; button on each result opens a modal displaying the full Markdown content rendered using <code>marked.parse()</code> (requires <code>marked.js</code> library).</li>
</ul>
</li>
<li>Styling for search components and modal is included within <code>_includes/search.njk</code>.</li>
</ul>
<h2>Styling &amp; Assets</h2>
<ul>
<li>Static assets (CSS, JS, Images) are located in the <code>assets/</code> directory and copied directly to <code>_site/assets</code> during build.</li>
</ul>
<h2>CI/CD</h2>
<ul>
<li>GitHub Actions workflow defined in <code>.github/workflows/deploy.yml</code>.</li>
<li><strong>Trigger:</strong> Runs on push to <code>main</code> branch and <code>workflow_dispatch</code>.</li>
<li><strong>Environment:</strong> <code>ubuntu-latest</code> with Node.js v22.</li>
<li><strong>Process:</strong>
<ol>
<li>Checkout code.</li>
<li>Setup Node.js &amp; cache npm dependencies.</li>
<li>Install dependencies (<code>npm install</code>).</li>
<li>Build site (<code>npm run build</code>) - output to <code>./_site</code>.</li>
<li>Deploy <code>./_site</code> contents to <code>gh-pages</code> branch using <code>peaceiris/actions-gh-pages@v4</code>.</li>
</ol>
</li>
<li>The build process adapts URLs based on <code>process.env.GITHUB_ACTIONS</code> (adds <code>/prompt_library</code> base path), configured in <code>.eleventy.js</code>.</li>
<li>A <code>baseUrl</code> global variable and <code>pathPrefix</code> are configured in <code>.eleventy.js</code> to handle deployment to GitHub Pages subpath.</li>
</ul>
<h2>Contribution Process</h2>
<ul>
<li>Contribution guidelines are documented in the <code>contributing.njk</code> page.</li>
<li><strong>Methods:</strong>
<ul>
<li><strong>GitHub Direct:</strong> Standard Fork -&gt; Branch -&gt; Add File -&gt; Commit -&gt; PR workflow.</li>
<li><strong>Cursor:</strong> Recommends using Cursor AI with the <code>prompt-library-requirements</code> rule for guided content creation.</li>
<li><strong>GitHub Issues:</strong> Allows users to suggest content via issues tagged &quot;Content Suggestion:&quot;.</li>
</ul>
</li>
<li><strong>Content Requirements:</strong>
<ul>
<li><strong>Metadata (Frontmatter):</strong> <code>title</code>, <code>description</code>, <code>date</code>, <code>tags</code> (min 2).</li>
<li><strong>Formatting:</strong> Markdown, clear headings, code blocks, reasonable line length, lists.</li>
<li><strong>Validation:</strong> Check metadata, preview locally (<code>npm start</code>), validate links/code, check style.</li>
</ul>
</li>
<li>The <code>contributing.njk</code> page includes an accordion UI (JS/CSS) to present the methods.</li>
</ul>
<h3>Planned Contribution Workflow (via Issue Templates)</h3>
<ul>
<li><strong>Initiation:</strong> Contributor selects an Issue Template (e.g., for prompts) and fills out the form.</li>
<li><strong>Submission:</strong> A GitHub Issue is created with structured data and specific labels (e.g., <code>new-contribution</code>, <code>needs-review</code>).</li>
<li><strong>Curation:</strong> Maintainer reviews the issue, verifies the content, and potentially refines the data (e.g., adds tags).</li>
<li><strong>Conversion:</strong> Maintainer manually creates the corresponding Markdown file in the correct location, populating the frontmatter and content from the issue data.</li>
<li><strong>Integration:</strong> Maintainer commits the new file, typically via a PR, for final review and merge.</li>
</ul>
